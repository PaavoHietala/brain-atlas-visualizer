<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" property="og:description" content="An online visualizer tool for Freesurfer geometries & parcellations.">
  <meta name="author" content="Paavo Hietala">
  <meta name="image" property="og:image" content="https://paavohietala.github.io/brain-atlas-visualizer/deploy/ogimage.jpg" />
  <meta property="og:url" content="https://paavohietala.github.io/brain-atlas-visualizer/" />
  <meta property="og:title" content="Brain Atlas Visualizer" />
  <title>Brain Atlas Visualizer</title>
  <link rel="stylesheet" href="./src/style.css" />
</head>
<body>
  <div id="sidebar">
    <div class="sidebar-header">
      <h2>Brain Atlas Visualizer</h2>
      <div class="button-group">
        <button id="help-btn" class="icon-btn" title="View Instructions">‚ÑπÔ∏è</button>
      </div>
    </div>
    
    <!-- Geometry Selector -->
    <div class="geometry-selector">
      <label for="geometry-select">Surface Geometry:</label>
      <select id="geometry-select">
        <option value="pial" selected>Pial (Outer) - Default</option>
        <option value="inflated">Inflated</option>
        <option value="original">Original</option>
        <option value="white">White Matter</option>
      </select>
    </div>
    
    <!-- Atlas Selector -->
    <div class="atlas-selector">
      <label for="atlas-select">Atlas/Parcellation:</label>
      <select id="atlas-select">
        <!-- Options will be populated dynamically -->
      </select>
    </div>
    
    <div class="sidebar-header">
      <h2>Atlas Labels</h2>
    </div>
    <div id="labels-container">
      <div class="hemisphere-column">
        <h3>Left Hemisphere</h3>
        <ul class="label-list" id="labels-lh"></ul>
      </div>
      <div class="hemisphere-column">
        <h3>Right Hemisphere</h3>
        <ul class="label-list" id="labels-rh"></ul>
      </div>
    </div>
  </div>
  <div id="vtk-container">
    <button id="toggle-names-btn" class="floating-btn" title="Toggle Label Names">Aa</button>
    <div class="loading">Loading brain model</div>
  </div>

  <!-- Instructions Modal -->
  <div id="instructions-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Brain Atlas Viewer - Instructions</h2>
      <div class="instructions">
        <h3>üñ±Ô∏è Camera Controls</h3>
        <ul>
          <li><strong>Left Click + Drag:</strong> Rotate the view (about object)</li>
          <li><strong>Shift + Click + Drag:</strong> Pan the view</li>
          <li><strong>Ctrl + Click + Drag:</strong> Rotate the camera</li>
          <li><strong>Scroll Wheel:</strong> Zoom in/out</li>
        </ul>
        
        <h3>üß† Label Selection</h3>
        <ul>
          <li><strong>Click a label:</strong> Highlights the region in red/orange and automatically focuses the camera</li>
          <li><strong>Click same label again:</strong> Deselects and returns to full brain view</li>
          <li>Only one label can be active at a time</li>
        </ul>
        
        <h3>üé® Visualization</h3>
        <ul>
          <li><strong>Gray shading:</strong> Shows sulcal depth (darker = sulci, lighter = gyri)</li>
          <li><strong>Orientation widget:</strong> Bottom-left corner shows current view direction with colored axes</li>
          <li><strong>Coordinate system:</strong> FreeSurfer RAS orientation (Red = X; Yellow = Y; Green = Z)</li>
          <li>Hemispheres are rotated outward to show medial surfaces</li>
        </ul>
        
        <h3>‚öôÔ∏è Options</h3>
        <ul>
          <li><strong>Surface Geometry:</strong> Switch between different brain surface representations (Inflated, Original, Pial, White Matter)</li>
          <li><strong>Aa button:</strong> Toggle between technical FreeSurfer names and plain English descriptions</li>
        </ul>

        <h3>‚ùóÔ∏è Notice</h3>
        <ul>
          <li><strong>Much of the code has been vibed using Copilot and Claude Sonnet 4.5. Use at your own risk and double-check the results from the original sources.</strong></li>
          <li>Feel free to report any issues or suggest improvements on the project's <a href="https://github.com/PaavoHietala/brain-atlas-visualizer">GitHub Repository</a>.</li>
          <li><a href="https://github.com/PaavoHietala/brain-atlas-visualizer/tree/main/license">Licenses</a></li>
        </ul>

      </div>
    </div>
  </div>

  <!-- Main script -->
  <script src="./deploy/vtk_bundle.js"></script>
</body>
</html>
